module.exports=function(t){function e(r){if(i[r])return i[r].exports;var n=i[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,r){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=21)}([function(t,e,i){"use strict";e.a=function(){var t=function(){function e(t){}function i(){}function r(t,e){1!=arguments.length&&e||(e=[]);for(var i=this.__super_?this.__super_:this,r=i._super_,n=void 0;"function"==typeof r[t];){if(i[t]!==r[t]){this.__super_=r,n=r[t].apply(this,e);break}r=r._super_}return this.__super_=null,n}function n(t){var n=function(t){this.init(t)};return t?(n.prototype=Object.create(t.prototype),n.prototype._super_=t.prototype):n.prototype._super_={},void 0===n.prototype.init&&(n.prototype.init=e),void 0===n.prototype.destroy&&(n.prototype.destroy=i),void 0===n.prototype.super&&(n.prototype.super=r),n}function o(t){return void 0===t}function a(t){return!o(t)}function s(t){return"boolean"==typeof t}function h(t){return!s(t)}function d(t){return"number"==typeof t&&!isNaN(t)}function l(t){return!d(t)}function c(t){return"string"==typeof t}function u(t){return!u(t)}function f(t){return t instanceof Array}function p(t){return!f(t)}function v(t){return"object"==typeof t}function m(t){return!v(t)}function g(t){return"function"==typeof t}function y(t){return!g(t)}function x(e){if(t.isArray(e)){for(var i=[],r=0,n=e.length;r<n;++r)i.push(t.clone(e[r]));return i}if(t.isObject(e)){var o={};for(var a in e)e.hasOwnProperty(a)&&(o[a]=t.clone(e[a]));return o}return e}function C(t,e){return o(t)?e:t}return{extend:n,isUndefined:o,isNotUndefined:a,isBoolean:s,isNotBoolean:h,isNumber:d,isNotNumber:l,isString:c,isNotString:u,isArray:f,isNotArray:p,isObject:v,isNotObject:m,isFunction:g,isNotFunction:y,clone:x,checkAndGet:C}}();return t}()},function(t,e,i){"use strict";var r=i(0);e.a=function(){var t=function(){function t(t){return function(){return this.$properties[t]}}function e(t,e){return function(i){var r=this.$properties[t];r!==i&&(this.$properties[t]=i,this.postNotification(e,[i,r]))}}return{notifyPropertyGetter:t,notifyPropertySetter:e}}();return function(){var e=r.a.extend(null);return e.prototype.init=function(){this.$properties={},this._observers={}},e.prototype.addObserver=function(t,e,i,r){var n=this._observers[t];n||(n=[],this._observers[t]=n);for(var r=r||1,o={fn:e,target:i,order:r},a=0,s=n.length;a<s;++a){if(n[a].order>r)return void n.splice(a,0,o)}n.push(o)},e.prototype.removeObserver=function(t,e,i){var r=this._observers[t];if(r)for(var n,o=0,a=r.length;o<a;++o)n=r[o],n.fn===e&&n.target===i&&(r.splice(o,1),o--,a--)},e.prototype.getObserverByName=function(t){return this._observers[t]},e.prototype.getObserverByAllParams=function(t,e,i){var r=this._observers[t];if(r)for(var n,o=0,a=r.length;o<a;++o)if(n=r[o],n.fn===e&&n.target===i)return n;return null},e.prototype.postNotification=function(t,e){var i=this._observers[t];if(i){var r=i.length;if(r>0){e=e||[],e.unshift(this);for(var n,o=0;o<r;++o)n=i[o],n.fn.apply(n.target,e)}}},e.prototype.defineNotifyProperty=function(e,i){Object.defineProperty(this,e,{configurable:!1,enumerable:!1,get:t.notifyPropertyGetter(e),set:t.notifyPropertySetter(e,e+"Changed")}),r.a.isUndefined(i)||(this[e]=i)},e.prototype.defineCustomProperty=function(t,e,i,n,o){Object.defineProperty(this,t,{configurable:!1,enumerable:!1,get:n,set:o}),r.a.isUndefined(i)||(e[t]=i)},e.prototype.destroy=function(){this.$properties=null,this._observers=null},e}()}()},function(t,e,i){"use strict";var r=i(0),n=i(1),o=i(12),a=i(4);e.a=function(){var t=function(){function t(){this.clip?null===this.getObserverByAllParams("render",this.startClip,this,this)&&this.addObserver("render",this.startClip,this,0):this.removeObserver("render",this.startClip,this)}function e(){this._transformCtx.localInvalid=!0}function i(){this._zoneCtx.localInvalid=!0}return{syncClipRender:t,syncLocalTransform:e,syncLocalZone:i}}();return function(){var e=0,i=r.a.extend(n.a);return i.prototype.defX=0,i.prototype.defY=0,i.prototype.defRotateZ=0,i.prototype.defScaleX=1,i.prototype.defScaleY=1,i.prototype.defInclineX=0,i.prototype.defInclineY=0,i.prototype.defWidth=0,i.prototype.defHeight=0,i.prototype.defAnchorX=.5,i.prototype.defAnchorY=.5,i.prototype.defAlpha=1,i.prototype.defVisible=!0,i.prototype.defCursor="default",i.prototype.defInteractive=!1,i.prototype.defClip=!1,i.prototype.defLayer=0,i.prototype.init=function(i){this.super("init",[i]),this.defineNotifyProperty("x",r.a.checkAndGet(i.x,this.defX)),this.defineNotifyProperty("y",r.a.checkAndGet(i.y,this.defY)),this.defineNotifyProperty("rotateZ",r.a.checkAndGet(i.rotateZ,this.defRotateZ)),this.defineNotifyProperty("scaleX",r.a.checkAndGet(i.scaleX,this.defScaleX)),this.defineNotifyProperty("scaleY",r.a.checkAndGet(i.scaleY,this.defScaleY)),this.defineNotifyProperty("shearX",r.a.checkAndGet(i.shearX,this.defInclineX)),this.defineNotifyProperty("shearY",r.a.checkAndGet(i.shearY,this.defInclineY)),this.defineNotifyProperty("width",r.a.checkAndGet(i.width,this.defWidth)),this.defineNotifyProperty("height",r.a.checkAndGet(i.height,this.defHeight)),this.defineNotifyProperty("anchorX",r.a.checkAndGet(i.anchorX,this.defAnchorX)),this.defineNotifyProperty("anchorY",r.a.checkAndGet(i.anchorY,this.defAnchorY)),this.defineNotifyProperty("alpha",r.a.checkAndGet(i.alpha,this.defAlpha)),this.defineNotifyProperty("visible",r.a.checkAndGet(i.visible,this.defVisible)),this.defineNotifyProperty("cursor",r.a.checkAndGet(i.cursor,this.defCursor)),this.defineNotifyProperty("interactive",r.a.checkAndGet(i.interactive,this.defInteractive)),this.defineNotifyProperty("clip",r.a.checkAndGet(i.clip,this.defClip)),this.defineNotifyProperty("parent",r.a.checkAndGet(i.parent,null)),this.defineNotifyProperty("application",r.a.checkAndGet(i.application,null)),this._id=++e,this._childNodes={count:0,defLayer:r.a.checkAndGet(i.defLayer,this.defLayer),nodeLayers:[]},this._transformCtx={localInvalid:!1,localTransform:[0,0,0,0,0,0],localReverseTransform:[0,0,0,0,0,0],worldTransform:[0,0,0,0,0,0],worldReverseTransform:[0,0,0,0,0,0]},this._zoneCtx={localInvalid:!0,local:{left:0,top:0,right:0,bottom:0,width:0,height:0},world:{left:0,top:0,right:0,bottom:0,width:0,height:0}},this._dirtyCtx={render:!0,oriReported:!1,curReported:!1},t.syncClipRender.call(this),t.syncLocalTransform.call(this),t.syncLocalZone.call(this),this.addObserver("xChanged",this.dirty,this),this.addObserver("yChanged",this.dirty,this),this.addObserver("rotateZChanged",this.dirty,this),this.addObserver("scaleXChanged",this.dirty,this),this.addObserver("scaleYChanged",this.dirty,this),this.addObserver("shearXChanged",this.dirty,this),this.addObserver("shearYChanged",this.dirty,this),this.addObserver("widthChanged",this.dirty,this),this.addObserver("heightChanged",this.dirty,this),this.addObserver("anchorXChanged",this.dirty,this),this.addObserver("anchorYChanged",this.dirty,this),this.addObserver("alphaChanged",this.dirty,this),this.addObserver("visibleChanged",this.dirty,this),this.addObserver("clipChanged",t.syncClipRender,this),this.addObserver("xChanged",t.syncLocalTransform,this),this.addObserver("yChanged",t.syncLocalTransform,this),this.addObserver("rotateZChanged",t.syncLocalTransform,this),this.addObserver("scaleXChanged",t.syncLocalTransform,this),this.addObserver("scaleYChanged",t.syncLocalTransform,this),this.addObserver("shearXChanged",t.syncLocalTransform,this),this.addObserver("shearYChanged",t.syncLocalTransform,this),this.addObserver("parentChanged",t.syncLocalTransform,this),this.addObserver("widthChanged",t.syncLocalZone,this),this.addObserver("heightChanged",t.syncLocalZone,this),this.addObserver("anchorXChanged",t.syncLocalZone,this),this.addObserver("anchorYChanged",t.syncLocalZone,this)},i.prototype.getID=function(){return this._id},i.prototype.getLocalZone=function(){var t=this._zoneCtx.local;return{left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}},i.prototype.getWorldZone=function(){var t=this._zoneCtx.world;return{left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}},i.prototype.getDirtyZone=function(){var t=this._zoneCtx.world;return{left:t.left-1,top:t.top-1,right:t.right+1,bottom:t.bottom+1,width:t.width+2,height:t.height+2}},i.prototype.getChildNode=function(t,e){var i=this._childNodes.nodeLayers[t];return i?i[e]:null},i.prototype.getChildNodeLayers=function(){return this._childNodes.nodeLayers},i.prototype.getChildNodeLocation=function(t){for(var e=0,i=this._childNodes.nodeLayers.length;e<i;++e){var r=this._childNodes.nodeLayers[e];if(r)for(var n=0,o=r.length;n<o;++n)if(r[n]===t)return{layerIndex:e,nodeIndex:n}}return null},i.prototype.appendChildNode=function(t){t.removeFromParent(!1),this.appendChildNodeToLayer(t,this._childNodes.defLayer)},i.prototype.appendChildNodeToLayer=function(t,e){t.removeFromParent(!1);var i=this._childNodes,r=i.nodeLayers;r[e]||(r[e]=[]),i.count++,t.parent=this,r[e].push(t)},i.prototype.insertChildNode=function(t,e){this.insertChildNodeToLayer(t,this._childNodes.defLayer,e)},i.prototype.insertChildNodeToLayer=function(t,e,i){t.removeFromParent(!1);var r=this._childNodes,n=r.nodeLayers;n[e]||(n[e]=[]),r.count++,t.parent=this,i<n[e].length?n[e].splice(i,0,t):n[e].push(t)},i.prototype.removeChildNode=function(t,e){if(e)t.destroy();else for(var i=this._childNodes.nodeLayers,r=0,n=i.length;r<n;++r){var o=i[r];if(o)for(var a=0,s=o.length;a<s;++a)if(t===o[a])return o.splice(a,1),t.stopAllAnimation(!0),t.parent=null,t.application=null,void this._childNodes.count--}},i.prototype.removeFromParent=function(t){var e=this.parent;e&&e.removeChildNode(this,t)},i.prototype.runAnimation=function(t,e,i,r){const n=this.findApplication();n&&n.runNodeAnimation(this,t,e,i,r)},i.prototype.stopAnimation=function(t){const e=this.findApplication();e&&e.stopNodeAnimation(this,t)},i.prototype.stopAllAnimation=function(t){const e=this.findApplication();if(e){if(t)for(var i=this._childNodes.nodeLayers,r=0,n=i.length;r<n;++r){var o=i[r];if(o)for(var a=0,s=o.length;a<s;++a)o[a].stopAllAnimation(t)}e.stopNodeAllAnimation(this)}},i.prototype.transformLVectorToW=function(t){return o.a.mulMat2DAndVect2D(this._transformCtx.worldTransform,t)},i.prototype.transformWVectorToL=function(t){return o.a.mulMat2DAndVect2D(this._transformCtx.worldReverseTransform,t)},i.prototype.transformLVectorToP=function(t){return o.a.mulMat2DAndVect2D(this._transformCtx.localTransform,t)},i.prototype.transformPVectorToL=function(t){return o.a.mulMat2DAndVect2D(this._transformCtx.localReverseTransform,t)},i.prototype.getTransformInParent=function(){var t=this._transformCtx.localTransform;return[t[0],t[1],t[2],t[3],t[4],t[5]]},i.prototype.getReverseTransformInParent=function(){var t=this._transformCtx.localReverseTransform;return[t[0],t[1],t[2],t[3],t[4],t[5]]},i.prototype.getTransformInWorld=function(){var t=this._transformCtx.worldTransform;return[t[0],t[1],t[2],t[3],t[4],t[5]]},i.prototype.getReverseTransformInWorld=function(){var t=this._transformCtx.worldReverseTransform;return[t[0],t[1],t[2],t[3],t[4],t[5]]},i.prototype.startClip=function(t){var e=this._zoneCtx.local;t.beginPath(),t.moveTo(e.left,e.top),t.lineTo(e.right,e.top),t.lineTo(e.right,e.bottom),t.lineTo(e.left,e.bottom),t.closePath(),t.clip()},i.prototype.stopClip=function(t){t.restore()},i.prototype.checkNeedRender=function(t){var e=this.getObserverByName("render");return e&&e.length>0},i.prototype.checkEventTrigger=function(t,e,i,r){var n=this._zoneCtx.local;return i>=n.left&&i<=n.right&&r>=n.top&&r<=n.bottom},i.prototype.findApplication=function(){var t=this.application;if(null!==t)return t;for(var e=this.parent;null===t&&null!==e;)t=e.application,e=e.parent;return this.application=t,t},i.prototype.destroy=function(){for(var t=this._childNodes.nodeLayers,e=0,i=t.length;e<i;++e){var r=t[e];if(r)for(;;){var n=r.pop();if(void 0===n)break;n.destroy()}}this.removeFromParent(!1),this.super("destroy")},i.prototype._syncTransform=function(t,e,i,r){this.postNotification("frame");var n=this._transformCtx,s=this._zoneCtx,h=this._dirtyCtx,d=s.local,l=s.world;if(s.localInvalid&&(d.width=Math.round(this.width),d.height=Math.round(this.height),d.top=Math.round(d.height*-this.anchorY),d.bottom=Math.round(d.height+d.top),d.left=Math.round(d.width*-this.anchorX),d.right=Math.round(d.width+d.left)),n.localInvalid?(n.localTransform=o.a.shear2D(o.a.scale2D(o.a.rotate2D(o.a.translate2D(o.a.createIdentityMat2D(),this.x,this.y),this.rotateZ),this.scaleX,this.scaleY),this.shearX,this.shearY),n.localReverseTransform=o.a.reverse2D(n.localTransform),n.worldTransform=o.a.mulMat2D(t,n.localTransform),n.worldReverseTransform=o.a.mulMat2D(n.localReverseTransform,e)):r&&(n.worldTransform=o.a.mulMat2D(t,n.localTransform),n.worldReverseTransform=o.a.mulMat2D(n.localReverseTransform,e)),s.localInvalid||n.localInvalid||r){var c=this.transformLVectorToW([d.left,d.top]),u=this.transformLVectorToW([d.left,d.bottom]),f=this.transformLVectorToW([d.right,d.top]),p=this.transformLVectorToW([d.right,d.bottom]);l.top=Math.min(Math.min(c[1],u[1]),Math.min(f[1],p[1])),l.bottom=Math.max(Math.max(c[1],u[1]),Math.max(f[1],p[1])),l.left=Math.min(Math.min(c[0],u[0]),Math.min(f[0],p[0])),l.right=Math.max(Math.max(c[0],u[0]),Math.max(f[0],p[0])),l.width=l.right-l.left,l.height=l.bottom-l.top}n.localInvalid=!1,s.localInvalid=!1,h.render=a.a.isZoneCross(i,this.getDirtyZone());for(var v=this._childNodes.nodeLayers,m=0,g=v.length;m<g;++m){var y=v[m];if(y)for(var x=0,C=y.length;x<C;++x)y[x]._syncTransform(n.worldTransform,n.worldReverseTransform,r||n.localInvalid)}},i.prototype.dirty=function(){var t=this.findApplication();null!==t&&this._reportOriDirtyZone(t)},i.prototype._reportOriDirtyZone=function(t){var e=this._dirtyCtx;e.oriReported||(e.render&&t.receiveDirtyZone(this,this.getDirtyZone()),this.oriReported=!0);for(var i=this._childNodes.nodeLayers,r=0,n=i.length;r<n;++r){var o=i[r];if(o)for(var a=0,s=o.length;a<s;++a)o[a]._reportOriDirtyZone(t)}},i.prototype._reportCurDirtyZone=function(t,e){var i=!1,r=this._dirtyCtx,n=this._zoneCtx.world;if(r.render&&!r.curReported){var o=this._transformCtx.worldTransform;if(r.oriReported){var s=this.getDirtyZone();i=t.receiveDirtyZone(this,s),r.curReported=!0}else if(1!==o[0]||0!==o[1]||0!==o[3]||0!==o[4])for(var s=this.getDirtyZone(),h=0,d=e.length;h<d;++h){var s=e[h];if(a.a.isZoneCross(s,n)){i=t.receiveDirtyZone(this,s),r.curReported=!0;break}}}for(var l=this._childNodes.nodeLayers,h=0,d=l.length;h<d;++h){var c=l[h];if(c)for(var u=0,f=c.length;u<f;++u)i=i||c[u]._reportCurDirtyZone(t,e)}return i},i.prototype._dispatchRender=function(t,e,i,r){var n=this._dirtyCtx,o=this.alpha*e;if(this.visible&&o>0)if(this.clip){if(n.render){var s=this._transformCtx.worldTransform;if(t.setTransform(s[0],s[3],s[1],s[4],s[2],s[5]),t.globalAplha=o,n.curReported)this.postNotification("render",[t,[this._zoneCtx.local]]),this._dispatchChildrenRender(t,o,i,r),this.stopClip();else{for(var h=this._zoneCtx.world,d=[],l=0,c=r.length;l<c;++l){var u=a.a.getZoneCross(h,r[l]);null!==u&&(u.left-=s[4],u.right-=s[4],u.top-=s[5],u.bottom-=[5],d.push(u))}d.length>0&&(this.postNotification("render",[t,d]),this._dispatchChildrenRender(t,o,i,r),this.stopClip())}}}else if(n.render){if(this.checkNeedRender()){var s=this._transformCtx.worldTransform;if(t.setTransform(s[0],s[3],s[1],s[4],s[2],s[5]),t.globalAplha=o,n.curReported)this.postNotification("render",[t,[this._zoneCtx.local]]);else{for(var h=this._zoneCtx.world,d=[],l=0,c=r.length;l<c;++l){var u=a.a.getZoneCross(h,r[l]);null!==u&&(u.left-=s[4],u.right-=s[4],u.top-=s[5],u.bottom-=s[5],d.push(u))}d.length>0&&this.postNotification("render",[t,d])}}this._dispatchChildrenRender(t,o,i,r)}else this._dispatchChildrenRender(t,o,i,r);n.oriReported=!1,n.curReported=!1},i.prototype._dispatchChildrenRender=function(t,e,i,r){for(var n=this._childNodes.nodeLayers,o=0,a=n.length;o<a;++o){var s=n[o];if(s)for(var h=0,d=s.length;h<d;++h)s[h]._dispatchRender(t,e,i,r)}},i.prototype._dispatchMouseTouchEvent=function(t,e){if(this.visible){var i=this.transformWVectorToL([e.offsetX,e.offsetY]),r=this.checkEventTrigger(t,e,i[0],i[1]);if(e.skip)return e.skip=!1,!1;for(var n=!1,o=this._childNodes.nodeLayers,a=o.length-1;a>=0;--a){var s=o[a];if(s)for(var h=s.length-1;h>=0;--h)if(s[h]._dispatchMouseTouchEvent(t,e)){n=!0;break}if(n)break}return n?(e.bubble&&this.postNotification(t,[e]),!0):!!r&&(this.interactive&&this.postNotification(t,[e]),!0)}return!1},i.prototype._getId=function(){return this._id},i}()}()},function(t,e,i){"use strict";var r=i(0),n=i(1);e.a=function(){var t=function(){function t(t){return function(){return this.$context[t]}}function e(t){return function(e){this.$context[t]!==e&&(this.$context[t]=e)}}function i(t){return function(){return this.$canvas[t]}}function r(t){return function(e){this.$canvas[t]!==e&&(this.$canvas[t]=e)}}return{contextPropertyGetter:t,contextPropertySetter:e,canvasPropertyGetter:i,canvasPropertySetter:r}}();return function(){var e=r.a.extend(n.a);return e.prototype.init=function(t){this.super("init",[t]),this.$canvas=r.a.checkAndGet(t.canvas,null),this.$context=this.$canvas.getContext("2d"),this._saveStack=[],this.defineCanvasProperty("width",r.a.checkAndGet(t.width,void 0),!1),this.defineCanvasProperty("height",r.a.checkAndGet(t.height,void 0),!1),this.defineCanvasProperty("clientWidth",void 0,!0),this.defineCanvasProperty("clientHeight",void 0,!0),this.defineContextProperty("fillStyle"),this.defineContextProperty("strokeStyle"),this.defineContextProperty("shadowColor"),this.defineContextProperty("shadowBlur"),this.defineContextProperty("shadowOffsetX"),this.defineContextProperty("shadowOffsetY"),this.defineContextProperty("lineCap"),this.defineContextProperty("lineJoin"),this.defineContextProperty("lineWidth"),this.defineContextProperty("miterLimit"),this.defineContextProperty("font"),this.defineContextProperty("textAlign"),this.defineContextProperty("textBaseline"),this.defineContextProperty("globalAlpha"),this.defineContextProperty("globalCompositeOperation")},e.prototype.getCanvas=function(){return this.$canvas},e.prototype.getContext=function(){return this.$context},e.prototype.defineContextProperty=function(e,i,r){this.defineCustomProperty(e,this.$context,i,t.contextPropertyGetter(e),r?void 0:t.contextPropertySetter(e))},e.prototype.defineCanvasProperty=function(e,i,r){this.defineCustomProperty(e,this.$canvas,i,t.canvasPropertyGetter(e),r?void 0:t.canvasPropertySetter(e))},e.prototype.beginPath=function(){this.$context.beginPath()},e.prototype.moveTo=function(t,e){this.$context.moveTo(t,e)},e.prototype.lineTo=function(t,e){this.$context.lineTo(t,e)},e.prototype.rect=function(t,e,i,r){this.$context.rect(t,e,i,r)},e.prototype.arc=function(t,e,i,r,n,o){this.$context.arc(t,e,i,r,n,o)},e.prototype.arcTo=function(t,e,i,r,n){this.$context.arcTo(t,e,i,r,n)},e.prototype.quadraticCurveTo=function(t,e,i,r){this.$context.quadraticCurveTo(t,e,i,r)},e.prototype.bezierCurveTo=function(t,e,i,r,n,o){this.$context.bezierCurveTo(t,e,i,r,n,o)},e.prototype.closePath=function(){this.$context.closePath()},e.prototype.buildPath=function(t){this.$context.moveTo(t[0][0],t[0][1]);for(var e=1,i=t.length;e<i;++e)this.$context.lineTo(t[e][0],t[e][1])},e.prototype.isPointInPath=function(t,e){return this.$context.isPointInPath(t,e)},e.prototype.stroke=function(){this.$context.stroke()},e.prototype.strokeRect=function(t,e,i,r){this.$context.strokeRect(t,e,i,r)},e.prototype.strokeText=function(t,e,i){this.$context.strokeText(t,e,i)},e.prototype.strokeTextExt=function(t,e,i,r){this.$context.strokeText(t,e,i,r)},e.prototype.fill=function(){this.$context.fill()},e.prototype.fillRect=function(t,e,i,r){this.$context.fillRect(t,e,i,r)},e.prototype.fillText=function(t,e,i){this.$context.fillText(t,e,i)},e.prototype.fillTextExt=function(t,e,i,r){this.$context.fillText(t,e,i,r)},e.prototype.drawImage=function(t,e,i){this.$context.drawImage(t,e,i)},e.prototype.drawImageExt=function(t,e,i,r,n,o,a,s,h){this.$context.drawImage(t,e,i,r,n,o,a,s,h)},e.prototype.createImageData=function(t,e){this.$context.createImageData(t,e)},e.prototype.getImageData=function(t,e,i,r){return this.$context.getImageData(t,e,i,r)},e.prototype.putImageData=function(t,e,i){this.$context.putImageData(t,e,i)},e.prototype.putImageDataExt=function(t,e,i,r,n,o,a){this.$context.putImageData(imgData,e,i,r,n,o,a)},e.prototype.createLinearGradient=function(t,e,i,r){return this.$context.createLinearGradient(t,e,i,r)},e.prototype.createRadialGradient=function(t,e,i,r,n,o){return this.$context.createRadialGradient(t,e,i,r,n,o)},e.prototype.createPattern=function(t,e){this.$context.createPattern(t,e)},e.prototype.clip=function(){this.$context.save(),this.$context.clip()},e.prototype.clear=function(){this.$context.clearRect(0,0,this.$canvas.width,this.$canvas.height)},e.prototype.clearRect=function(t,e,i,r){this.$context.clearRect(t,e,i,r)},e.prototype.save=function(){this.$context.save(),this._saveStack.push(!0)},e.prototype.restore=function(){this._saveStack.pop()&&this.$context.restore()},e.prototype.toDataURL=function(){return this.$canvas.toDataURL()},e.prototype.translate=function(t,e){this.$context.translate(t,e)},e.prototype.rotate=function(t){this.$context.rotate(t)},e.prototype.scale=function(t,e){this.$context.scale(t,e)},e.prototype.transform=function(t,e,i,r,n,o){this.$context.transform(t,e,i,r,n,o)},e.prototype.setTransform=function(t,e,i,r,n,o){this.$context.setTransform(t,e,i,r,n,o)},e.prototype.destroy=function(){this.$context=null,this.$canvas=null,this.super("destroy")},e}()}()},function(t,e,i){"use strict";e.a=function(){return function(){function t(t,i){return!e(t,i)}function e(t,e){return t.left>=e.right||t.right<=e.left||t.top>=e.bottom||t.bottom<=e.top}function i(t,e){var i=Math.max(t.left,e.left),r=Math.min(t.right,e.right),n=r-i;if(n<=0)return null;var o=Math.max(t.top,e.top),a=Math.min(t.bottom,e.bottom),s=a-o;return s<=0?null:{left:i,right:r,top:o,bottom:a,width:n,height:s}}return{isZoneCross:t,isZoneNotCross:e,getZoneCross:i}}()}()},function(t,e,i){"use strict";var r=i(0),n=i(1);e.a=function(){return function(){var t=r.a.extend(n.a);return t.prototype.execute=function(t,e){},t}()}()},function(t,e,i){"use strict";var r=i(0),n=i(1);e.a=function(){return function(){var t=r.a.extend(n.a);return t.prototype.init=function(t){this.super("init",[t]),this.defineNotifyProperty("node",r.a.checkAndGet(t.node,null)),this.defineNotifyProperty("animation",r.a.checkAndGet(t.animation,null)),this.defineNotifyProperty("callbackFn",r.a.checkAndGet(t.callbackFn,null)),this.defineNotifyProperty("callbackTarget",r.a.checkAndGet(t.callbackTarget,null)),this.defineNotifyProperty("loop",r.a.checkAndGet(t.loop,null)),this._runParams={}},t.prototype.execute=function(t){var e=this.animation.execute(this,t);return null!==this.callbackFn&&this.callbackFn.call(this.callbackTarget,this,e),e},t.prototype.getRunParam=function(t){return this._runParams[t]},t.prototype.setRunParam=function(t,e){this._runParams[t]=e},t.prototype.destroy=function(){this.node=null,this.animation=null,this.callbackFn=null,this.callbackTarget=null,this.loop=null,this.super("destroy")},t}()}()},function(t,e,i){"use strict";e.a=function(){var t=window,e=function(){return t.requestAnimationFrame?t.requestAnimationFrame:t.webkitRequestAnimationFrame?t.webkitRequestAnimationFrame:t.msRequestAnimationFrame?t.msRequestAnimationFrame:t.mozRequestAnimationFrame?t.mozRequestAnimationFrame:t.oRequestAnimationFrame?t.oRequestAnimationFrame:null}(),i=0,r=[],n=0,o=!1,a=function(){h(),e(a)},s=function(){n=t.setInterval(h,16)},h=function(){var t,e,i=r.length;for(t=0;t<i;++t)e=r[t],e.fn.call(e.target)};return{addAnimationTask:function(t,n){return r.push({id:++i,fn:t,target:n}),o||(null===e?s():a(),o=!0),i},removeAnimationTaskById:function(t){for(var e=0,i=r.length;e<i;++e){r[e].id==t&&(r.splice(e,1),e--,i--)}}}}()},function(t,e,i){"use strict";e.a=function(){var t=[];return{KEY_CODE:{TAB:9,CLEAR:12,ENTER:13,SHIFT_LEFT:16,CTRL_LEFT:17,ALT_LEFT:18,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PRIOR:33,NEXT:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,SELECT:41,PRINT:42,EXECUTE:43,INSERT:44,DELETE:45,HELP:47,NUMBER0:48,NUMBER1:49,NUMBER2:50,NUMBER3:51,NUMBER4:52,NUMBER5:53,NUMBER6:54,NUMBER7:55,NUMBER8:56,NUMBER9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,KP_NUMBER0:96,KP_NUMBER1:97,KP_NUMBER2:98,KP_NUMBER3:99,KP_NUMBER4:100,KP_NUMBER5:101,KP_NUMBER6:102,KP_NUMBER7:103,KP_NUMBER8:104,KP_NUMBER9:105,KP_MULTIPLY:106,KP_ADD:107,KP_SEPARATOR:108,KP_SUBSTRACT:109,KP_DECIMAL:110,KP_DEVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,F16:127,F17:128,F18:129,F19:130,F20:131,F21:132,F22:133,F23:134,F24:135,NUM_LOCK:136,SCROLL_LOCK:137},addEventListener:function(e,i,r,n){var o=n.bind(r);t.push({node:e,type:i,target:r,listener:n,fn:o}),e.addEventListener(i,o,!1)},removeEventListener:function(e,i,r,n){for(var o=0,a=t.length;o<a;++o){var s=t[o];s.node===e&&s.type===i&&s.target===r&&s.listener===n&&(e.removeEventListener(i,s.fn,!1),t.splice(o,1),o--,a--)}}}}()},function(t,e,i){"use strict";e.a=function(){return{isMobile:-1!=navigator.userAgent.toLowerCase().indexOf("mobile"),isDeskTop:!(-1!=navigator.userAgent.toLowerCase().indexOf("mobile")),isIE:-1!=navigator.userAgent.toLowerCase().indexOf("msie")}}()},function(t,e,i){"use strict";var r=i(0),n=i(1),o=i(6);e.a=function(){return function(){var t=r.a.extend(n.a);return t.prototype.init=function(t){this.super("init",[t]),this._animationBinders=[],this._paused=!1},t.prototype.pause=function(){this._paused=!0},t.prototype.resume=function(){this._paused=!1},t.prototype.addAnimation=function(t,e,i,r,n){this._animationBinders.push(new o.a({node:t,animation:e,callbackFn:i,callbackTarget:r,loop:n}))},t.prototype.removeAnimationByNode=function(t){for(var e=this._animationBinders,i=0,r=e.length;i<r;++i){e[i].node===t&&(e.splice(i,1),i--,r--)}},t.prototype.removeAnimationByNodeAndAnimation=function(t,e){for(var i=this._animationBinders,r=0,n=i.length;r<n;++r){var o=i[r];o.node===t&&o.animation===e&&(i.splice(r,1),r--,n--)}},t.prototype.run=function(t){if(!this._paused)for(var e=this._animationBinders,i=0,r=e.length;i<r;++i){var n=e[i];n.execute(t)&&!n.loop?(e.splice(i,1),i--,r--,n.fn&&n.fn.call(n.target,n,t,!0)):n.fn&&n.fn.call(n.target,n,t,!1)}},t.prototype.destroy=function(){this._animationBinders=null,this.super("destroy")},t}()}()},function(t,e,i){"use strict";var r=i(0),n=i(1);e.a=function(){var t=document;return function(){var e=r.a.extend(n.a);return e.prototype.init=function(t){this.super("init",[t]),this._loadingImages={},this._loadedImages={},this._loadingAudios={},this._loadedAudios={},this._loadingVideos={},this._loadedVideos={}},e.prototype.loadImageAsync=function(e,i,n,o){function a(){this.removeEventListener("load",a,!1),this.removeEventListener("error",s,!1),delete d._loadingImages[e],d._loadedImages[e]=h,i&&i.call(n,e,this,!0)}function s(){this.removeEventListener("load",a,!1),this.removeEventListener("error",s,!1),delete d._loadingImages[e],d._loadedImages[e]=null,i&&i.call(n,e,null,!1)}if(r.a.isUndefined(this._loadedImages[e])){var h=this._loadingImages[e];if(h){if(o)return}else h=t.createElement("img"),h.src=e,this._loadingImages[e]=h;var d=this;return h.addEventListener("load",a,!1),void h.addEventListener("error",s,!1)}return this._loadedImages[e]},e.prototype.loadAudioAsync=function(e,i,n,o){function a(){this.removeEventListener("load",a,!1),this.removeEventListener("error",s,!1),delete d._loadingAudios[e],d._loadedImages[e]=h,i&&i.call(n,e,this,!0)}function s(){this.removeEventListener("load",a,!1),this.removeEventListener("error",s,!1),delete d._loadingAudios[e],d._loadedAudios[e]=null,i&&i.call(n,e,null,!1)}if(r.a.isUndefined(this._loadedAudios[e])){var h=this._loadingAudios[e];if(h){if(o)return}else h=t.createElement("audio"),h.src=e,this._loadingAudios[e]=h;var d=this;return h.addEventListener("load",a,!1),void h.addEventListener("error",s,!1)}return this._loadedAudios[e]},e.prototype.loadVideoAsync=function(e,i,n,o){function a(){this.removeEventListener("load",a,!1),this.removeEventListener("error",s,!1),delete d._loadingVideos[e],d._loadedVideos[e]=h,i&&i.call(n,e,this,!0)}function s(){this.removeEventListener("load",a,!1),this.removeEventListener("error",s,!1),delete d._loadingVideos[e],d._loadedVideos[e]=null,i&&i.call(n,e,null,!1)}if(r.a.isUndefined(this._loadedVideos[e])){var h=this._loadingVideos[e];if(h){if(o)return}else h=t.createElement("video"),h.src=e,this._loadingVideos[e]=h;var d=this;return h.addEventListener("load",a,!1),void h.addEventListener("error",s,!1)}return this._loadedVideos[e]},e.prototype.removeImage=function(t){this._loadingImages[t]&&delete this._loadingImages[t],this._loadedImages[t]&&delete this._loadedImages[t]},e.prototype.removeAudio=function(t){this._loadingAudios[t]&&delete this._loadingAudios[t],this._loadedAudios[t]&&delete this._loadedAudios[t]},e.prototype.removeVideo=function(t){this._loadingVideos[t]&&delete this._loadingVideos[t],this._loadedVideos[t]&&delete this._loadedVideos[t]},e.prototype.destroy=function(){this._loadingImages=null,this._loadedImages=null,this._loadingAudios=null,this._loadedAudios=null,this._loadingVideos=null,this._loadedVideos=null,this.super("destroy")},e}()}()},function(t,e,i){"use strict";e.a=function(){return{createIdentityMat2D:function(){return[1,0,0,0,1,0]},copyMat2D:function(t,e){for(var i=0,r=t.length;i<r;++i)e[i]=t[i];return e},restMat2D:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t},mulMat2D:function(t,e){return[t[0]*e[0]+t[1]*e[3],t[0]*e[1]+t[1]*e[4],t[0]*e[2]+t[1]*e[5]+t[2],t[3]*e[0]+t[4]*e[3],t[3]*e[1]+t[4]*e[4],t[3]*e[2]+t[4]*e[5]+t[5]]},mulMat2DAndVect2D:function(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2],t[3]*e[0]+t[4]*e[1]+t[5]]},translate2D:function(t,e,i){return[t[0],t[1],t[0]*e+t[1]*i+t[2],t[3],t[4],t[3]*e+t[4]*i+t[5]]},rotate2D:function(t,e){var i=Math.sin(e),r=Math.cos(e);return[t[0]*r+t[1]*i,t[1]*r-t[0]*i,t[2],t[3]*r+t[4]*i,t[4]*r-t[3]*i,t[5]]},scale2D:function(t,e,i){return[t[0]*e,t[1]*i,t[2],t[3]*e,t[4]*i,t[5]]},shear2D:function(t,e,i){return[t[0]+t[1]*i,t[0]*e+t[1],t[2],t[3]+t[4]*i,t[3]*e+t[4],t[5]]},reverse2D:function(t){var e=t[0]*t[4]-t[1]*t[3];return[t[4]/e,-t[1]/e,(t[1]*t[5]-t[2]*t[4])/e,-t[3]/e,t[0]/e,(t[3]*t[2]-t[0]*t[5])/e]}}}()},function(t,e,i){"use strict";var r=i(0),n=i(5),o=i(6);e.a=function(){return function(){var t=r.a.extend(n.a);return t.prototype.init=function(t){this.super("init",[t]),this.defineNotifyProperty("animations",r.a.checkAndGet(t.animations,[])),this.defineNotifyProperty("sync",r.a.checkAndGet(t.sync,!1))},t.prototype.execute=function(t,e){var i;if(t.getRunParam("init"))i=t.getRunParam("binders");else{var r=t.node,n=this.animations;i=[];for(var a=0,s=n.length;a<s;++a)i.push(new o.a({node:r,animation:n[a]}));t.setRunParam("init",!0),t.setRunParam("binders",i)}if(0===i.length)return t.setRunParam("init",!1),t.setRunParam("binders",null),!0;if(this.sync)i[0].execute(e)&&i.splice(0,1);else for(var a=i.length-1;a>=0;--a)i[a].execute(e)&&i.splice(a,1);return!1},t.prototype.destroy=function(){this.animations=null,this.super("destroy")},t}()}()},function(t,e,i){"use strict";var r=i(0),n=i(5);e.a=function(){return function(){var t=r.a.extend(n.a);return t.prototype.init=function(t){this.super("init",[t]),this.defineNotifyProperty("callbackFn",r.a.checkAndGet(t.callbackFn,null)),this.defineNotifyProperty("callbackTarget",r.a.checkAndGet(t.callbackTarget,null)),this.defineNotifyProperty("interval",r.a.checkAndGet(t.interval,0)),this.defineNotifyProperty("repeats",r.a.checkAndGet(t.repeats,0)),this.defineNotifyProperty("params",r.a.checkAndGet(t.params,null))},t.prototype.execute=function(t,e){if(this.repeats>0){var i=0,r=0;return t.getRunParam("init")?(i=t.getRunParam("repeats"),r=t.getRunParam("sumTime")):(t.setRunParam("init",!0),t.setRunParam("repeats",i),t.setRunParam("sumTime",r)),r+=e,r>=this.interval&&(this.callbackFn.call(this.callbackTarget,t,this.params),r-=this.interval,i+=1),i>=this.repeats?(t.setRunParam("init",!1),!0):(t.setRunParam("repeats",i),t.setRunParam("sumTime",r),!1)}return!0},t.prototype.destroy=function(){this.callbackFn=null,this.callbackTarget=null,this.params=null,this.super("destroy")},t}()}()},function(t,e,i){"use strict";var r=i(0),n=i(5);e.a=function(){return function(){var t=r.a.extend(n.a);return t.prototype.init=function(t){this.super("init",[t]),this.defineNotifyProperty("property",r.a.checkAndGet(t.property,"")),this.defineNotifyProperty("offset",r.a.checkAndGet(t.offset,0)),this.defineNotifyProperty("offsetFn",r.a.checkAndGet(t.offsetFn,null))},t.prototype.execute=function(t,e){var i=0,r=0;t.getRunParam("init")?(i=t.getRunParam("propertyOffset"),r=t.getRunParam("sumTime")):(t.setRunParam("init",!0),t.setRunParam("propertyOffset",i),t.setRunParam("sumTime",r)),r+=e;var n=t.node,o=this.property,a=this.offsetFn.call(n,t.animation,e,r);return(a-this.offset)*(i-this.offset)<=0?(t.setRunParam("init",!1),n[o]=n[o]+this.offset-i,!0):(t.setRunParam("propertyOffset",a),t.setRunParam("sumTime",r),n[o]=n[o]+a-i,!1)},t.prototype.destroy=function(){this.property=null,this.offset=null,this.offsetFn=null,this.super("destroy")},t}()}()},function(t,e,i){"use strict";var r=i(0),n=i(2),o=i(3);e.a=function(){var t=document,e=function(){function e(){var e=this._backgroundBorderCacheCtx;null===this.backgroundColor&&(null===this.borderColor||this.borderWidth<=0)?(this.removeObserver("render",r,this),e.render=null):(null===this.getObserverByAllParams("render",r,this,this)&&this.addObserver("render",r,this,-1/0),null===e.render&&(e.renderInvalid=!0,e.render=new o.a({canvas:t.createElement("canvas"),width:this.width,height:this.height})))}function i(){this._backgroundBorderCacheCtx.renderInvalid=!0}function r(t,e,i){var r=this._backgroundBorderCacheCtx;r.renderInvalid&&(n.call(this,r.render),r.renderInvalid=!1);for(var o=this.getLocalZone(),a=r.render.getCanvas(),s=-o.left,h=-o.top,d=0,l=i.length;d<l;++d){var c=i[d];e.drawImageExt(a,c.left+s,c.top+h,c.width,c.height,c.left,c.top,c.width,c.height)}}function n(t){var e=this._backgroundBorderCacheCtx,i=this.getLocalZone();e.borderOffset=this.borderWidth/2,e.borderRadius=this.borderRadius,e.backgroundOffset=e.borderOffset,e.backgroundRadius=this.borderRadius,e.clipOffset=this.borderWidth,e.clipRadius=this.borderRadius<e.borderOffset?0:this.borderRadius-e.borderOffset,e.render.width!==i.width||e.render.height!==i.height?(e.render.width=i.width,e.render.height=i.height):e.render.clear(),e.borderRadius>0?s(t,0,0,i.width,i.height,e.borderOffset,e.borderRadius):a(t,0,0,i.width,i.height,e.borderOffset),null!==this.backgroundColor&&(t.fillStyle=this.backgroundColor,t.fill()),null!=this.borderColor&&this.borderWidth>0&&(t.lineWidth=this.borderWidth,t.strokeStyle=this.borderColor,t.stroke())}function a(t,e,i,r,n,o){e+=o,i+=o,r-=o,n-=o,t.beginPath(),t.moveTo(e,i),t.lineTo(r,i),t.lineTo(r,n),t.lineTo(e,n),t.closePath()}function s(t,e,i,r,n,o,a){e+=o,i+=o,r-=o,n-=o,t.beginPath(),t.moveTo(e,i+a),t.arcTo(e,i,e+a,i,a),t.lineTo(r-a,i),t.arcTo(r,i,r,i+a,a),t.lineTo(r,n-a),t.arcTo(r,n,r-a,n,a),t.lineTo(e+a,n),t.arcTo(e,n,e,n-a,a),t.closePath()}return{syncBackgroundBorderRender:e,syncBackgroundBorderRenderInvalid:i,renderRectPath:a,renderRadiusPath:s}}();return function(){var t=r.a.extend(n.a);return t.prototype.defVisible=!0,t.prototype.defBackgroundColor=null,t.prototype.defBorderWidth=0,t.prototype.defBorderColor=null,t.prototype.defBorderRadius=0,t.prototype.init=function(t){this.super("init",[t]),this.defineNotifyProperty("backgroundColor",r.a.checkAndGet(t.backgroundColor,this.defBackgroundColor)),this.defineNotifyProperty("borderWidth",r.a.checkAndGet(t.borderWidth,this.defBorderWidth)),this.defineNotifyProperty("borderColor",r.a.checkAndGet(t.borderColor,this.defBorderColor)),this.defineNotifyProperty("borderRadius",r.a.checkAndGet(t.borderRadius,this.defBorderRadius)),this._backgroundBorderCacheCtx={borderOffset:0,borderRadius:0,backgroundOffset:0,backgroundRadius:0,clipOffset:0,clipRadius:0,renderInvalid:!0,render:null},e.syncBackgroundBorderRender.call(this),e.syncBackgroundBorderRenderInvalid.call(this),this.addObserver("backgroundColorChanged",this.dirty,this),this.addObserver("borderWidthChanged",this.dirty,this),this.addObserver("borderColorChanged",this.dirty,this),this.addObserver("borderRadiusChanged",this.dirty,this),this.addObserver("backgroundColorChanged",e.syncBackgroundBorderRender,this),this.addObserver("borderWidthChanged",e.syncBackgroundBorderRender,this),this.addObserver("borderColorChanged",e.syncBackgroundBorderRender,this),this.addObserver("widthChanged",e.syncBackgroundBorderRenderInvalid,this),this.addObserver("heightChanged",e.syncBackgroundBorderRenderInvalid,this),this.addObserver("backgroundColorChanged",e.syncBackgroundBorderRenderInvalid,this),this.addObserver("borderWidthChanged",e.syncBackgroundBorderRenderInvalid,this),this.addObserver("borderColorChanged",e.syncBackgroundBorderRenderInvalid,this),this.addObserver("borderRadiusChanged",e.syncBackgroundBorderRenderInvalid,this)},t.prototype.startClip=function(t){var i=this._backgroundBorderCacheCtx,r=this.getLocalZone();i.clipRadius>0?e.renderRadiusPath(t,r.left,r.top,r.right,r.bottom,i.clipOffset,i.clipRadius):e.renderRectPath(t,r.left,r.top,r.right,r.bottom,i.clipOffset),t.clip()},t}()}()},function(t,e,i){"use strict";e.a=function(){var t=document,e=t.createElement("canvas"),i=e.getContext("2d"),r={};return function(){function t(t){if(r[t])return r[t];var e={};return i.font=t,e[" "]=i.measureText(" ").width,e["!"]=i.measureText("!").width,e['"']=i.measureText('"').width,e["#"]=i.measureText("#").width,e.$=i.measureText("$").width,e["%"]=i.measureText("%").width,e["&"]=i.measureText("&").width,e["'"]=i.measureText("'").width,e["("]=i.measureText("(").width,e[")"]=i.measureText(")").width,e["*"]=i.measureText("*").width,e["+"]=i.measureText("+").width,e[","]=i.measureText("-").width,e["-"]=i.measureText(",").width,e["."]=i.measureText(",").width,e["/"]=i.measureText("/").width,e[0]=i.measureText("0").width,e[1]=i.measureText("1").width,e[2]=i.measureText("2").width,e[3]=i.measureText("3").width,e[4]=i.measureText("4").width,e[5]=i.measureText("5").width,e[6]=i.measureText("6").width,e[7]=i.measureText("7").width,e[8]=i.measureText("8").width,e[9]=i.measureText("9").width,e[":"]=i.measureText(":").width,e[";"]=i.measureText(";").width,e["<"]=i.measureText("<").width,e["="]=i.measureText("=").width,e[">"]=i.measureText(">").width,e["?"]=i.measureText("?").width,e["@"]=i.measureText("@").width,e.A=i.measureText("A").width,e.B=i.measureText("B").width,e.C=i.measureText("C").width,e.D=i.measureText("D").width,e.E=i.measureText("E").width,e.F=i.measureText("F").width,e.G=i.measureText("G").width,e.H=i.measureText("H").width,e.I=i.measureText("I").width,e.J=i.measureText("J").width,e.K=i.measureText("K").width,e.L=i.measureText("L").width,e.M=i.measureText("M").width,e.N=i.measureText("N").width,e.O=i.measureText("O").width,e.P=i.measureText("P").width,e.Q=i.measureText("Q").width,e.R=i.measureText("R").width,e.S=i.measureText("S").width,e.T=i.measureText("T").width,e.U=i.measureText("U").width,e.V=i.measureText("V").width,e.W=i.measureText("W").width,e.X=i.measureText("X").width,e.Y=i.measureText("Y").width,e["["]=i.measureText("Z").width,e["\\"]=i.measureText("\\").width,e["]"]=i.measureText("]").width,e["^"]=i.measureText("^").width,e._=i.measureText("_").width,e["`"]=i.measureText("`").width,e.a=i.measureText("a").width,e.b=i.measureText("b").width,e.c=i.measureText("c").width,e.d=i.measureText("d").width,e.e=i.measureText("e").width,e.f=i.measureText("f").width,e.g=i.measureText("g").width,e.h=i.measureText("h").width,e.i=i.measureText("i").width,e.j=i.measureText("j").width,e.k=i.measureText("k").width,e.l=i.measureText("l").width,e.m=i.measureText("m").width,e.n=i.measureText("n").width,e.o=i.measureText("o").width,e.p=i.measureText("p").width,e.q=i.measureText("q").width,e.r=i.measureText("r").width,e.s=i.measureText("s").width,e.t=i.measureText("t").width,e.u=i.measureText("u").width,e.v=i.measureText("v").width,e.w=i.measureText("w").width,e.x=i.measureText("x").width,e.y=i.measureText("y").width,e.z=i.measureText("z").width,e["{"]=i.measureText("{").width,e["|"]=i.measureText("|").width,e["}"]=i.measureText("}").width,e["~"]=i.measureText("~").width,e["\n"]=i.measureText("\n").width,e.zh=i.measureText("汉").width,r[t]=e,e}function e(e,i){for(var r=t(i),n=0,o=null,a=0,s=e.length;a<s;++a)o=e[a],n+=o>"~"?r.zh:r[e[a]]?r[e[a]]:r[" "];return Math.ceil(n)}function n(i,r,n){if(n>0){if(i&&i.length>0){var o=t(r),a=i.length,s=0,h=0,d=0,l=-1,c=0,u=null,f=[],p=0;if(n>0)for(var v=0;v<a;++v)u=i[v],u>"~"?(h=o.zh,s+=h,p+=h,l=v,c=s):(h=o[u],s+=h,p+=h,"\n"==u?(f.push(i.substring(d,v)),d=v+1,s=0,!1):" "==u&&(l=v,c=s)),s>n&&(!0,u>"~"||""==u||l<=d?(f.push(i.substring(d,v)),d=v,s=h):(f.push(i.substring(d,l)),d=l+1,s-=c));return d<a&&f.push(i.substr(d,a)),{width:p,lines:f}}return[]}return{width:e(i,r),lines:[i]}}return{getTextLayoutInfo:n}}()}()},function(t,e,i){"use strict";var r=i(0),n=i(14),o=i(15),a=i(13);e.a=function(){var t=["rotateZ","scaleX","scaleY","shearX","shearY","alpha","visible","img"],e=["x","y","rotateZ","scaleX","scaleY","shearX","shearY","alpha","visible","img"],i={x:!0,y:!0,rotateZ:!0,scaleX:!0,scaleY:!0,shearX:!0,shearY:!0,alpha:!0,visible:!1,img:!1},s=function(t,e){t.node[e.property]=e.value},h=function(t,e){var i=t/e;return function(t,e,r){return r*i}},d=function(t){return function(e,i,r){var n=l(t,r,.5),o=1-n;return t[1]*Math.pow(o,3)+3*t[3]*Math.pow(o,2)*n+3*t[5]*o*Math.pow(n,2)+t[7]*Math.pow(n,3)}},l=function(t,e,i){for(var r=0;r<5;){var n=1-i,o=t[0]*Math.pow(n,3)+3*t[2]*Math.pow(n,2)*i+3*t[4]*n*Math.pow(i,2)+t[6]*Math.pow(i,3)-e;if(Math.abs(o)<.5)break;var a=(-3*t[0]+3*t[2])*Math.pow(n,2)+(-6*t[2]+6*t[4])*n*i+(3*t[6]-3*t[4])*Math.pow(i,2);0===a?i=i+.1>1?i-.1:i+.1:i-=o/a,r++}return i<0?0:i>1?1:i};return{compileModelFrames:function(l,c,u){if(c&&c.length>0){for(var f,p=0,v=[],m=0,g=c.length;m<g;++m){var y=[],x=c[m];if(0===m){if(0!==x.time)return console.error("First frame time should be zero"),null;f=r.a.clone(x.data.props)}var y=[],C=u?t:e;if(x.tween&&0!==m)for(var T=0,b=C.length;T<b;++T){var _=f[C[T]],w=x.data.props[C[T]];if(!r.a.isUndefined(w)&&_!==w){var A=w-_,I=x.time-p;if(i[C[T]])if(x.data.curves&&x.data.curves[C[T]]&&8===x.data.curves[C[T]].length){var k=x.curves[C[T]],R=[],P=k[6]-k[0],N=k[7]-k[1];R[0]=0,R[2]=(k[2]-k[0])/P*I,R[4]=(k[4]-k[0])/P*I,R[6]=I,R[1]=0,R[3]=(k[3]-k[1])/N*A,R[5]=(k[5]-k[1])/N*A,R[7]=A,v.push(new o.a({property:C[T],offset:A,offsetFn:d(R)}))}else y.push(new o.a({property:C[T],offset:A,offsetFn:h(A,I)}));else y.push(new n.a({callbackFn:s,callbackTarget:void 0,interval:I,repeats:1,params:{property:C[T],value:w}}));f[C[T]]=w}}else for(var T=0,b=C.length;T<b;++T){var _=f[C[T]],w=x.data.props[C[T]];if(r.a.isUndefined(_))return console.error("First frame has some required node property:"+C[T]),null;(0===m||!r.a.isUndefined(w)&&_!==w)&&(y.push(new n.a({callbackFn:s,callbackTarget:void 0,interval:x.time-p,repeats:1,param:{property:C[T],value:w}})),f[C[T]]=w)}p=x.time,y.length>0&&v.push(new a.a({animations:y,sync:!1}))}return v.length>0?new a.a({animations:v,sync:!0}):null}return null}}}()},function(t,e,i){"use strict";var r=i(0),n=i(2),o=i(20);e.a=function(){return function(){var t=r.a.extend(n.a);return t.prototype.defLayer=1,t.prototype.defAnchorX=.5,t.prototype.defAnchorY=.5,t.prototype.init=function(t){this.super("init",[t]),this._texture=new o.a(r.a.checkAndGet(t.texture,{})),this.appendChildNodeToLayer(this._texture,0)},t.prototype.getTexture=function(t){return this._texture},t}()}()},function(t,e,i){"use strict";var r=i(0),n=i(2);e.a=function(){var t=function(){function t(){this.removeObserver("render",i,this),this.removeObserver("render",n,this),null!==this.image&&""!==this.image&&(r.a.isString(this.image)?this.addObserver("render",i,this):this.addObserver("render",n,this))}function e(){if(null!==this.image&&""!==this.image){var t=this._imageCtx,e=this.image;t.invalid=!0,r.a.isString(e)?t.url=e:t.url=e.url}}function i(t,e,i){var r=this._imageCtx,n=this.findApplication().loadImage(r.url,this.getID(),o,this);if(n)for(var a=this.getLocalZone(),s=-a.left,h=-a.top,d=0,l=i.length;d<l;++d){var c=i[d];e.drawImageExt(n,c.left+s,c.top+h,c.width,c.height,c.left,c.top,c.width,c.height)}}function n(t,e,i){var r=this._imageCtx,n=this.findApplication().loadImage(r.url,this.getID(),o,this);if(n)for(var a=this.getLocalZone(),s=r.x-a.left,h=r.y-a.top,d=0,l=i.length;d<l;++d){var c=i[d];e.drawImageExt(n,c.left+s,c.top+h,c.width,c.height,c.left,c.top,c.width,c.height)}}function o(t,e,i,n){var o=this._imageCtx;o.invalid&&i&&(console.log("bb"),r.a.isString(this.image)?(this.width=e.width,this.height=e.height,o.x=0,o.y=0,o.width=e.width,o.height=e.height):(this.width=this.image.width,this.height=this.image.height,o.x=this.image.x,o.y=this.image.y,o.width=this.image.width,o.height=this.image.height),o.invalid=!1),n&&(console.log("aa"),this.dirty())}return{syncImageRender:t,syncImageContext:e}}();return function(){var e=r.a.extend(n.a);return e.prototype.defImage=null,e.prototype.defAnchorX=.5,e.prototype.defAnchorY=.5,e.prototype.init=function(e){this.super("init",[e]),this.defineNotifyProperty("image",r.a.checkAndGet(e.image,this.defImage)),this._imageCtx={invalid:!0,url:null,x:0,y:0,width:0,height:0},t.syncImageRender.call(this),t.syncImageContext.call(this),this.addObserver("imageChanged",this.dirty,this),this.addObserver("imageChanged",t.syncImageRender,this),this.addObserver("imageChanged",t.syncImageContext,this)},e}()}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(22),n=i(2),o=i(1),a=i(11),s=i(10),h=i(6),d=i(5),l=i(13),c=i(14),u=i(15),f=i(3),p=i(23),v=i(16),m=i(24),g=i(25),y=i(26),x=i(27),C=i(20),T=i(19),b=i(18),_=i(8),w=i(0),A=i(12),I=i(9),k=i(17),R=i(7),P=i(28),N=i(4);e.default=function(){return{core:{Application:r.a,Node:n.a,Notifier:o.a,io:{FileLoader:a.a},render:{CanvasRender:f.a,WebglRender:p.a},animation:{Manager:s.a,Binder:h.a,BaseAnimation:d.a,QueueAnimation:l.a,SchedulerAnimation:c.a,PropertyAnimation:u.a}},ui:{View:v.a,Label:m.a},game:{Scene:g.a,Map:y.a,Model:x.a,Texture:C.a,TextureNode:T.a,Util:b.a},utils:{EventUtil:_.a,LangUtil:w.a,MatrixUtil:A.a,PlatformUtil:I.a,TextUtil:k.a,TimerUtil:R.a,NumberUtil:P.a,GeometryUtil:N.a}}}()},function(t,e,i){"use strict";var r=i(0),n=i(7),o=i(8),a=i(9),s=i(4),h=i(1),d=i(3),l=i(10),c=i(11);e.a=function(){var t=window,e=document.documentElement,i=function(){function i(i){var r=this._events[0],n=this._render.getCanvas().getBoundingClientRect(),o=(i.pageX-(n.left-t.pageXOffset-e.clientLeft))*this._scaleX,a=(i.pageY-(n.top-t.pageYOffset-e.clientTop))*this._scaleY;return o!==r.offsetX||a!==r.offsetY||0!==i.wheelDelta?this.move=!0:this.move=!1,r.id=1,r.event=i,r.target=null,r.wheelDelta=i.wheelDelta?i.wheelDelta:i.detail,r.keyCode=i.keyCode,r.button=i.button,r.altKey=i.altKey,r.ctrlKey=i.ctrlKey,r.metaKey=i.metaKey,r.skip=!1,r.bubble=!0,r.offsetX=o,r.offsetY=a,r}function r(i,r){var n=this._events[r.identifier];n||(n=new u,this._events[r.identifier]=n);var o=this._render.getCanvas().getBoundingClientRect(),a=(i.pageX-(o.left-t.pageXOffset-e.clientLeft))*this._scaleX,s=(i.pageY-(o.top-t.pageYOffset-e.clientTop))*this._scaleY;return a!==n.offsetX||s!==n.offsetY||0!==i.wheelDelta?this.move=!0:this.move=!1,n.id=r.identifier,n.event=i,n.touch=r,n.target=null,n.skip=!1,n.bubble=!0,n.offsetX=a,n.offsetY=s,n}function n(e){for(var i=e||t.event,n=i.changedTouches,o=0,a=n.length;o<a;++o)this.postNotification("touchstart",[r.call(this,i,n[o])])}function s(e){for(var i=e||t.event,n=i.changedTouches,o=0,a=n.length;o<a;++o){var s=r(this,i,n[o]);s.move&&this.postNotification("touchmove",[s])}}function h(e){for(var i=e||t.event,n=i.changedTouches,o=0,a=n.length;o<a;++o)this.postNotification("touchend",[r.call(this,i,n[o])])}function d(e){for(var i=e||t.event,n=i.changedTouches,o=0,a=n.length;o<a;++o)this.postNotification("touchcancel",[r.call(this,i,n[o])])}function l(e){for(var i=e||t.event,r=i.changedTouches,n=this._root,o=0,a=r.length;o<a;++o){var s=event_prehandler_mobile.call(this,i,r[o]);this.postNotification("touchstart",[s]),n._dispatchMouseTouchEvent("touchstart",s),s.stopPropagation(),s.preventDefault()}}function c(e){for(var i=e||t.event,r=i.changedTouches,n=this._root,o=0,a=r.length;o<a;++o){var s=event_prehandler_mobile.call(this,i,r[o]);s.move&&(this.postNotification("touchmove",[s]),n._dispatchMouseTouchEvent("touchmove",s)),s.stopPropagation(),s.preventDefault()}}function f(e){for(var i=e||t.event,r=i.changedTouches,n=this._root,o=0,a=r.length;o<a;++o){var s=event_prehandler_mobile.call(this,i,r[o]);this.postNotification("touchend",[s]),n._dispatchMouseTouchEvent("touchend",s),s.stopPropagation(),s.preventDefault()}}function p(e){for(var i=e||t.event,r=i.changedTouches,n=this._root,o=0,a=r.length;o<a;++o){var s=event_prehandler_mobile.call(this,i,r[o]);this.postNotification("touchend",[s]),n._dispatchMouseTouchEvent("touchend",s),s.stopPropagation(),s.preventDefault()}}function v(e){this.postNotification("keydown",[i.call(this,e||t.event)])}function m(e){this.postNotification("keypress",[i.call(this,e||t.event)])}function g(e){this.postNotification("keyup",[i.call(this,e||t.event)])}function y(e){this.postNotification("mousedown",[i.call(this,e||t.event)])}function x(e){this.postNotification("mousemove",[i.call(this,e||t.event)])}function C(e){this.postNotification("mouseup",[i.call(this,e||t.event)])}function T(e){var r=i.call(this,e||t.event);this.postNotification("click",[r]),this._root._dispatchMouseTouchEvent("click",r),r.stopPropagation(),r.preventDefault()}function b(e){var r=i.call(this,e||t.event);this.postNotification("dblclick",[r]),this._root._dispatchMouseTouchEvent("dblclick",r),r.stopPropagation(),r.preventDefault()}function _(e){var r=i.call(this,e||t.event);this.postNotification("contextmenu",[r]),this._root._dispatchMouseTouchEvent("contextmenu",r),r.stopPropagation(),r.preventDefault()}function w(e){var r=i.call(this,e||t.event);this.postNotification("mousedown",[r]),this._root._dispatchMouseTouchEvent("mousedown",r),r.stopPropagation(),r.preventDefault()}function A(e){var r=i.call(this,e||t.event);this.postNotification("mousemove",[r]),this._root._dispatchMouseTouchEvent("mousemove",r),r.stopPropagation(),r.preventDefault()}function I(e){var r=i.call(this,e||t.event);this.postNotification("mouseup",[r]),this._root._dispatchMouseTouchEvent("mouseup",r),r.stopPropagation(),r.preventDefault()}function k(e){var r=i.call(this,e||t.event);this.postNotification("wheel",[r]),this._root._dispatchMouseTouchEvent("wheel",r),r.stopPropagation(),r.preventDefault()}function R(){var t=this._render.getCanvas(),e=document;a.a.isMobile?(o.a.addEventListener(e,"touchstart",this,n),o.a.addEventListener(e,"touchmove",this,s),o.a.addEventListener(e,"touchend",this,h),o.a.addEventListener(e,"touchcancel",this,d),o.a.addEventListener(t,"touchstart",this,l),o.a.addEventListener(t,"touchmove",this,c),o.a.addEventListener(t,"touchend",this,f),o.a.addEventListener(t,"touchcancel",this,p)):(this._events.push(new u),o.a.addEventListener(e,"keydown",this,v),o.a.addEventListener(e,"keypress",this,m),o.a.addEventListener(e,"keyup",this,g),o.a.addEventListener(e,"mousedown",this,y),o.a.addEventListener(e,"mousemove",this,x),o.a.addEventListener(e,"mouseup",this,C),o.a.addEventListener(t,"click",this,T),o.a.addEventListener(t,"dblclick",this,b),o.a.addEventListener(t,"contextmenu",this,_),o.a.addEventListener(t,"mousedown",this,w),o.a.addEventListener(t,"mousemove",this,A),o.a.addEventListener(t,"mouseup",this,I),o.a.addEventListener(t,"mousewheel",this,k),o.a.addEventListener(t,"wheel",this,k))}function P(){this._transformCtx.invalid=!0}function N(){var t=this._render,e=this._renderZone,i=this._transformCtx;if(i.invalid||t.clientWidth===this._clientWidth&&t.clientHeight===this._clientHeight||(this._clientWidth=t.clientWidth,this._clientHeight=t.clientHeight,i.invalid=!0),i.invalid){var r=t.width,n=t.height,o=t.clientWidth,a=t.clientHeight;switch(this.scaleMode){case 1:n=r*a/o,this.postNotification("resize",[r,n]);break;case 2:r=n*o/a,this.postNotification("resize",[r,n]);break;default:r=o,n=a,this.postNotification("resize",[r,n])}this._scaleX=r/o,this._scaleY=n/a,t.width=r,t.height=n,e.width=r,e.height=n,e.right=r,e.bottom=n,i.invalid=!1}}function O(t,e,i){if(i){var r=this._loaderCtx.callbacks[t];if(r){for(var n in r){var o=r[n];o.callbackFn.call(o.callbackTarget,t,e,i,!0)}delete this._loaderCtx.callbacks[t]}}}return{initEvent:R,syncTransform:P,syncRenderSize:N,loadImageFinished:O}}(),u=function(){function t(){this.id=0,this.event=null,this.touch=null,this.target=null,this.wheelDelta=0,this.keyCode=0,this.button=0,this.altKey=!1,this.ctrlKey=!1,this.metaKey=!1,this.move=!1,this.skip=!1,this.bubble=!0,this.offsetX=0,this.offsetY=0}return t.prototype.stopPropagation=function(){this.event.stopPropagation()},t.prototype.preventDefault=function(){this.event.preventDefault()},t}();return function(){var t=r.a.extend(h.a);return t.prototype.defScaleMode=0,t.prototype.init=function(t){this.super("init",[t]),this.defineNotifyProperty("scaleMode",r.a.checkAndGet(t.scaleMode,this.defScaleMode)),this._root=r.a.checkAndGet(t.root,null),this._root.application=this,this._render=new d.a({canvas:t.canvas,width:r.a.checkAndGet(t.width,void 0),height:r.a.checkAndGet(t.height,void 0)}),this._renderZone={top:0,left:0,right:0,bottom:0,width:0,height:0},this._dirtyZones=[],this._prevLoopTime=0,this._preCheckTime=0,this._timerTaskId=0,this._events=[],this._animationCtx={manager:new l.a({})},this._loaderCtx={callbacks:{},loader:new c.a({})},this._clientWidth=0,this._clientHeight=0,this._scaleX=1,this._scaleY=1,this._transformCtx={invalid:!0,transform:[1,0,0,0,1,0]},i.initEvent.call(this),i.syncTransform.call(this),i.syncRenderSize.call(this),this.addObserver("scaleModeChanged",i.syncTransform,this)},t.prototype.runNodeAnimation=function(t,e,i,r,n){this._animationCtx.manager.addAnimation(t,e,i,r,n)},t.prototype.stopNodeAnimation=function(t,e){this._animationCtx.manager.removeAnimationByNodeAndAnimation(t,e)},t.prototype.stopNodeAllAnimation=function(t){this._animationCtx.manager.removeAnimationByNode(t)},t.prototype.loadImage=function(t,e,r,n){var o=this._loaderCtx.loader.loadImageAsync(t,i.loadImageFinished,this,!0);if(void 0===o){if(null!==e&&null!==r){var a=this._loaderCtx.callbacks[t];a||(this._loaderCtx.callbacks[t]=a={}),a[e]||(a[e]={callbackFn:r,callbackTarget:n})}}else null===o?r.call(n,t,o,!1,!1):r.call(n,t,o,!0,!1);return o},t.prototype.loadAudio=function(t){return this._loaderCtx.loader.loadAudioAsync(t)},t.prototype.loadVideo=function(t){return this._loaderCtx.loader.loadVideoAsync(t)},t.prototype.receiveDirtyZone=function(t,e){var i=this._renderZone;if(s.a.isZoneNotCross(i,e))return!1;e.left=Math.max(i.left,e.left),e.right=Math.min(i.right,e.right),e.top=Math.max(i.top,e.top),e.bottom=Math.min(i.bottom,e.bottom),e.width=e.right-e.left,e.height=e.bottom-e.top;for(var r=this._dirtyZones;;){for(var n=!0,o=0,a=r.length;o<a;++o){var h=r[o];if(!s.a.isZoneNotCross(h,e)){e.left=Math.min(h.left,e.left),e.right=Math.max(h.right,e.right),e.top=Math.min(h.top,e.top),e.bottom=Math.max(h.bottom,e.bottom),e.width=e.right-e.left,e.height=e.bottom-e.top,n=!1,r.splice(o,1);break}}if(n){r.push(e);break}}return!0},t.prototype.loop=function(){var t=(new Date).getTime(),e=0;0!==this._prevLoopTime?(e=t-this._prevLoopTime,this._prevLoopTime=t,this._animationCtx.manager.run(e)):this._prevLoopTime=t,this._preCheckTime>500?(this._preCheckTime=0,i.syncRenderSize.call(this)):this._preCheckTime+=e;var r=this._dirtyZones;if(r.length>0){var n=this._renderZone,o=this._root,a=this._render,s=this._transformCtx.transform;for(o._syncTransform(s,s,n,!1);;)if(!o._reportCurDirtyZone(this,r))break;for(var h=0,d=r.length;h<d;++h){var l=r[h];a.clearRect(l.left,l.top,l.width,l.height)}o._dispatchRender(a,1,n,r),r.splice(0,r.length),a.setTransform(1,0,0,1,0,0),this._dirtyZones=[]}},t.prototype.run=function(){0===this._timerTaskId&&null!==this._root&&(this.receiveDirtyZone(null,{left:this._renderZone.left,top:this._renderZone.top,right:this._renderZone.right,bottom:this._renderZone.bottom,width:this._renderZone.width,height:this._renderZone.height}),this._timerTaskId=n.a.addAnimationTask(this.loop,this),this.postNotification("resize",[this._render.width,this._render.height]))},t.prototype.stop=function(){n.a.removeAnimationTaskById(this._timerTaskId),this._timerTaskId=0},t.prototype.destroy=function(){this._root&&(this._root.destroy(),this._root=null),this._render&&(this._render.destroy(),this._render=null),this._animationCtx&&(this._animationCtx.manager.destroy(),this._animationCtx=null),this._loaderCtx&&(this._loaderCtx.loader.destroy(),this._loaderCtx=null),this.super("destroy")},t}()}()},function(t,e,i){"use strict";var r=i(0),n=i(1);e.a=function(){var t=function(){function t(){this.$context.viewport(this.viewPortX,this.viewPortY,this.viewPortWidth,this.viewPortHeight)}return{syncViewPort:t}}();return function(){var e=r.a.extend(n.a);return e.prototype.init=function(e){this.super("init",[e]),this.$canvas=r.a.checkAndGet(e.canvas,null),this.$context=this.$canvas.getContext("webgl")||this.$canvas.getContext("experimental-webgl"),this.defineNotifyProperty("viewPortX",r.a.checkAndGet(e.x,0)),this.defineNotifyProperty("viewPortY",r.a.checkAndGet(e.y,0)),this.defineNotifyProperty("viewPortWidth",r.a.checkAndGet(e.width,this.$canvas.width)),this.defineNotifyProperty("viewPortHeight",r.a.checkAndGet(e.height,this.$canvas.height)),t.syncViewPort.call(this),this.addObserver("viewPortXChanged",t.syncViewPort,this),this.addObserver("viewPortYChanged",t.syncViewPort,this),this.addObserver("viewPortWidthChanged",t.syncViewPort,this),this.addObserver("viewPortHeightChanged",t.syncViewPort,this)},e.prototype.createAndCompileShader=function(t,e){var i=this.$context.createShader(t);return this.$context.shaderSource(i,e),this.$context.compileShader(i),i},e.prototype.attachAndLinkShaderProgram=function(t,e){var i=this.$context.createProgram();return i.attachShader(i,t),i.attachShader(i,e),this.$context.linkProgram(i),i},e}()}()},function(t,e,i){"use strict";var r=i(0),n=i(17),o=i(4),a=i(16),s=i(3);e.a=function(){var t=document,e=function(){function e(){var e=this._textCacheCtx;null===this.text||0===this.text.trim().length?(this.removeObserver("render",d,this),e.render=null):(null===this.getObserverByAllParams("render",d,this)&&this.addObserver("render",d,this),null===e.render&&(e.renderInvalid=!0,e.render=new s.a({canvas:t.createElement("canvas"),width:this.width,height:this.height})))}function i(){this._textCacheCtx.fontInvalid=!0}function a(){this._textCacheCtx.layoutInvalid=!0}function h(){this._textCacheCtx.renderInvalid=!0}function d(t,e,i){var r=this._textCacheCtx;r.fontInvalid&&(l.call(this),r.fontInvalid=!1),r.layoutInvalid&&(c.call(this),r.layoutInvalid=!1),r.renderInvalid&&(u.call(this),r.renderInvalid=!1);var n=this.getLocalZone(),a=n.width,s=n.height,h=a-2*this.borderWidth,d=s-2*this.borderWidth;if(h>0&&d>0){var f=n.left,p=n.top,v=r.render,m=v.width,g=v.height,y={left:0,top:0,right:0,bottom:0,width:m,height:g};this.textHorAlign<0?y.left=f+this.borderWidth:this.textHorAlign>0?y.left=f+this.borderWidth+h-m:y.left=f+this.borderWidth+Math.ceil((h-m)/2),y.right=y.left+m,this.textVerAlign<0?y.top=p+this.borderWidth:this.textVerAlign>0?y.top=p+this.borderWidth+d-g:y.top=p+this.borderWidth+Math.ceil((d-g)/2),y.bottom=y.top+g;for(var x=-y.left,C=-y.top,T=v.getCanvas(),b=0,_=i.length;b<_;++b){var w=i[b],A=o.a.getZoneCross(y,w);null!==A&&e.drawImageExt(T,A.left+x,A.top+C,A.width,A.height,A.left,A.top,A.width,A.height)}}}function l(){this._textCacheCtx._font=this.fontSize+"px "+this.fontFamily}function c(){var t=this._textCacheCtx;if(1!==this.textLineNum){var e=this.getLocalZone(),i=this.borderWidth>0&&null!==this.borderColor?this.borderWidth:0;t.layout=n.a.getTextLayoutInfo(this.text,t._font,e.width-2*i)}else t.layout=n.a.getTextLayoutInfo(this.text,t._font,-1)}function u(){var t=this.getLocalZone(),e=this._textCacheCtx,i=e.layout,n=i.lines,o=r.a.checkAndGet(this.textLineHeight,1.5*this.fontSize),a=this.textLineNum<1||this.textLineNum>n.length?n.length:this.textLineNum,s=e.render,h=1===a?i.width:t.width-2*this.borderWidth,d=o*a+1;s.width!==s.width||s.height!==d?(s.width=h,s.height=d):s.clear(),s.textBaseline="middle";var l=0,c=o/2;this.textHorAlign<0?(l=0,s.textAlign="left"):this.textHorAlign>0?(l=s.width,s.textAlign="right"):(l=s.width/2,s.textAlign="center"),s.font=this._textCacheCtx._font,s.fillStyle=this.textColor;for(var u=0;u<a;++u)s.fillText(n[u],l,c),c+=o}return{syncTextRender:e,syncTextFontInvalid:i,syncTextLayoutInvalid:a,syncTextRenderInvalid:h}}();return function(){var t=r.a.extend(a.a);return t.prototype.defFontSize=13,t.prototype.defFontFamily="Helvetica, Roboto, Arial, sans-serif",t.prototype.defTextColor="#000",t.prototype.defTextHorAlign=0,t.prototype.defTextVerAlign=0,t.prototype.init=function(t){this.super("init",[t]),this.defineNotifyProperty("text",r.a.checkAndGet(t.text,"")),this.defineNotifyProperty("fontSize",r.a.checkAndGet(t.fontSize,this.defFontSize)),this.defineNotifyProperty("fontFamily",r.a.checkAndGet(t.fontFamily,this.defFontFamily)),this.defineNotifyProperty("textColor",r.a.checkAndGet(t.textColor,this.defTextColor)),this.defineNotifyProperty("textHorAlign",r.a.checkAndGet(t.textHorAlign,this.defTextHorAlign)),this.defineNotifyProperty("textVerAlign",r.a.checkAndGet(t.textVerAlign,this.defTextVerAlign)),this.defineNotifyProperty("textLineHeight",r.a.checkAndGet(t.textLineHeight,void 0)),this.defineNotifyProperty("textLineNum",r.a.checkAndGet(t.textLineNum,1)),this._textCacheCtx={fontInvalid:!0,font:"",layoutInvalid:!0,layout:null,renderInvalid:!0,render:null},e.syncTextRender.call(this),e.syncTextFontInvalid.call(this),e.syncTextLayoutInvalid.call(this),e.syncTextRenderInvalid.call(this),this.addObserver("textChanged",this.dirty,this),this.addObserver("fontSizeChanged",this.dirty,this),this.addObserver("fontFamilyChanged",this.dirty,this),this.addObserver("textColor",this.dirty,this),this.addObserver("textHorAlignChanged",this.dirty,this),this.addObserver("textVerAlignChanged",this.dirty,this),this.addObserver("textLineHeightChanged",this.dirty,this),this.addObserver("textLineNumChanged",this.dirty,this),this.addObserver("textChanged",e.syncTextRender,this),this.addObserver("fontSizeChanged",e.syncTextFontInvalid,this),this.addObserver("fontFamilyChanged",e.syncTextFontInvalid,this),this.addObserver("widthChanged",e.syncTextLayoutInvalid,this),this.addObserver("textChanged",e.syncTextLayoutInvalid,this),this.addObserver("fontSizeChanged",e.syncTextLayoutInvalid,this),this.addObserver("fontFamilyChanged",e.syncTextFontInvalid,this),this.addObserver("widthChanged",e.syncTextRenderInvalid,this),this.addObserver("textChanged",e.syncTextRenderInvalid,this),this.addObserver("fontSizeChanged",e.syncTextRenderInvalid,this),this.addObserver("fontFamilyChanged",e.syncTextRenderInvalid,this),this.addObserver("textColorChanged",e.syncTextRenderInvalid,this),this.addObserver("textHorAlignChanged",e.syncTextRenderInvalid,this),this.addObserver("textLineHeightChanged",e.syncTextRenderInvalid,this),this.addObserver("textLineNumChanged",e.syncTextRenderInvalid,this)},t}()}()},function(t,e,i){"use strict";var r=i(0),n=i(2);e.a=function(){return function(){var t=r.a.extend(n.a);return t.prototype.defLayer=1,t.prototype.defAnchorX=0,t.prototype.defAnchorY=0,t}()}()},function(t,e,i){"use strict";var r=i(0),n=i(2),o=i(3);e.a=function(){var t=document,e=function(){function t(){this.removeObserver("mapXChanged",n,this),this.removeObserver("mapYChanged",o,this),this.removeObserver("anchorXChanged",a,this),this.removeObserver("anchorYChanged",s,this),this.removeObserver("mapTileWidthChanged",h,this),this.removeObserver("mapTileColsChanged",h,this),this.removeObserver("mapTileHeightChanged",d,this),this.removeObserver("mapTileRowsChanged",d,this),this.removeObserver("mapTileWidthChanged",l,this),this.removeObserver("mapTileRowsChanged",l,this),this.removeObserver("mapTileColsChanged",l,this),this.removeObserver("mapTileHeightChanged",c,this),this.removeObserver("mapTileRowsChanged",c,this),this.removeObserver("mapTileColsChanged",c,this),this.removeObserver("widthChanged",i,this),this.removeObserver("heightChanged",i,this),this.removeObserver("anchorXChanged",i,this),this.removeObserver("anchorYChanged",i,this),this.removeObserver("mapXChanged",i,this),this.removeObserver("mapYChanged",i,this),this.removeObserver("mapTileWidthChanged",e,this),this.removeObserver("mapTileHeightChanged",e,this),this.removeObserver("mapTileDataChanged",e,this),this.removeObserver("render",u,this),this.removeObserver("render",f,this),"square"===this.mapTileType?(this.addObserver("mapXChanged",n,this),this.addObserver("mapYChanged",o,this),this.addObserver("anchorXChanged",a,this),this.addObserver("anchorYChanged",s,this),this.addObserver("mapTileWidthChanged",h,this),this.addObserver("mapTileColsChanged",h,this),this.addObserver("mapTileHeightChanged",d,this),this.addObserver("mapTileRowsChanged",d,this),this.addObserver("widthChanged",i,this),this.addObserver("heightChanged",i,this),this.addObserver("anchorXChanged",i,this),this.addObserver("anchorYChanged",i,this),this.addObserver("mapXChanged",i,this),this.addObserver("mapYChanged",i,this),this.addObserver("mapTileWidthChanged",e,this),this.addObserver("mapTileHeightChanged",e,this),this.addObserver("mapTileDataChanged",e,this),this.addObserver("render",u,this),n.call(this),o.call(this),a.call(this),s.call(this),h.call(this),d.call(this),e.call(this)):"diamond"===this.mapTileType&&(this.addObserver("mapXChanged",n,this),this.addObserver("mapYChanged",o,this),this.addObserver("anchorXChanged",a,this),this.addObserver("anchorYChanged",s,this),this.addObserver("mapTileWidthChanged",l,this),this.addObserver("mapTileRowsChanged",l,this),this.addObserver("mapTileColsChanged",l,this),this.addObserver("mapTileHeightChanged",c,this),this.addObserver("mapTileRowsChanged",c,this),this.addObserver("mapTileColsChanged",c,this),this.addObserver("widthChanged",i,this),this.addObserver("heightChanged",i,this),this.addObserver("anchorXChanged",i,this),this.addObserver("anchorYChanged",i,this),this.addObserver("mapXChanged",i,this),this.addObserver("mapYChanged",i,this),this.addObserver("mapTileWidthChanged",e,this),this.addObserver("mapTileHeightChanged",e,this),this.addObserver("mapTileDataChanged",e,this),this.addObserver("render",f,this),n.call(this),o.call(this),a.call(this),s.call(this),l.call(this),c.call(this),e.call(this))}function e(){var t=this._mapCacheCtx.tile;t.needRender=!(!this.mapTileData||!r.a.isArray(this.mapTileData)),t.offsetInvalid=!0,t.sizeInvalid=!0,t.foreInvalid=!0,t.backInvalid=!0}function i(){this._mapCacheCtx.tile.foreInvalid=!0}function n(){this._mapNode.x=-this.mapX}function o(){this._mapNode.y=-this.mapY}function a(){this._mapNode.anchorX=this.anchorX}function s(){this._mapNode.anchorY=this.anchorY}function h(){this._mapNode.width=this.mapTileWidth*this.mapTileCols}function d(){this._mapNode.height=this.mapTileHeight*this.mapTileRows}function l(){this._mapNode.width=(this.mapTileRows+this.mapTileCols)*this.mapTileWidth/2}function c(){this._mapNode.height=(this.mapTileRows+this.mapTileCols)*this.mapTileHeight/2}function u(t,e,i){var r=this._mapCacheCtx,n=r.tile;n.needRender&&n.foreInvalid&&(p.call(this,n),n.foreInvalid=!1);var o=this.getLocalZone(),a=this._mapNode.getLocalZone();e.lineWidth=1,e.strokeStyle="#f00",e.strokeRect(o.left,o.top,o.width,o.height),e.strokeStyle="#0f0",e.strokeRect(a.left-this.mapX,a.top-this.mapY,a.width,a.height);for(var s=this.mapX-a.left-n.left,h=this.mapY-a.top-n.top,d=n.foreRender.getCanvas(),l=0,c=i.length;l<c;++l){var u=i[l];e.drawImageExt(d,u.left+s,u.top+h,u.width,u.height,u.left,u.top,u.width,u.height)}}function f(t,e,i){var r=this._mapCacheCtx,n=r.tile;n.needRender&&n.foreInvalid&&(v.call(this,n),n.foreInvalid=!1);var o=this.getLocalZone(),a=this._mapNode.getLocalZone();e.lineWidth=1,e.strokeStyle="#f00",e.strokeRect(o.left,o.top,o.width,o.height),e.strokeStyle="#0f0",e.strokeRect(a.left-this.mapX,a.top-this.mapY,a.width,a.height);for(var s=this.mapX-a.left-n.left,h=this.mapY-a.top-n.top,d=n.foreRender.getCanvas(),l=0,c=i.length;l<c;++l){var u=i[l];e.drawImageExt(d,u.left+s,u.top+h,u.width,u.height,u.left,u.top,u.width,u.height)}}function p(t){var e=this.getLocalZone(),i=this._mapNode.getLocalZone(),r=this.mapTileWidth,n=this.mapTileHeight,o=t.left,a=t.top,s=Math.floor((e.left+this.mapX-i.left)/r)*r,h=Math.floor((e.top+this.mapY-i.top)/n)*n,d=t.width,l=t.height,c=Math.ceil((this.width+e.left+this.mapX-i.left)/r)*r-s,u=Math.ceil((this.height+e.top+this.mapY-i.top)/n)*n-h,f=h/n,p=s/r,v=this.mapTileRows,g=this.mapTileCols;if(t.backInvalid){var y=t.backRender,x=t.foreRender;y.width!==c||y.height!==u?(y.width=c,y.height=u):y.clear();for(var C=this.findApplication(),T=this.mapTileData,b=this.mapTileImageIndex,_=this.mapTileImageClipIndex,w=this.getID(),A=f,I=0;A<v&&I<u;A+=1,I+=n)if(!(A<0))for(var k=T[A],R=p,P=0;R<g&&P<c;R+=1,P+=r)if(!(R<0)){var N=k[R];if(N){var O=_[N];if(O){var L=b[O.imageId];if(L){var M=C.loadImage(L,w,m,this);M&&y.drawImageExt(M,O.x,O.y,O.width,O.height,P,I,r,n)}}}}t.foreRender=y,t.backRender=x}else if(c!==d||u!==l||s!==o||h!==a){var y=t.backRender,x=t.foreRender;y.width!==c||y.height!==u?(y.width=c,y.height=u):y.clear();var E=Math.min(c+s,d+o)-Math.max(s,o),F=Math.min(u+h,l+a)-Math.max(h,a),B=E>0&&F>0,G=0,X=0,Y=0,D=0;B&&(G=s<o?o-s:0,Y=E+G,X=h<a?a-h:0,D=F+X,y.drawImageExt(x.getCanvas(),s>o?s-o:0,h>a?h-a:0,E,F,G,X,E,F),y.strokeStyle="#00f",y.strokeRect(G,X,E,F));for(var C=this.findApplication(),T=this.mapTileData,b=this.mapTileImageIndex,_=this.mapTileImageClipIndex,w=this.getID(),A=f,I=0;A<v&&I<u;A+=1,I+=n)if(console.log(A,v),!(A<0))for(var k=T[A],R=p,P=0;R<g&&P<c;R+=1,P+=r)if(!(R<0||B&&P>=G&&P<Y&&I>=X&&I<D)){var N=k[R];if(N){var O=_[N];if(O){var L=b[O.imageId];if(L){var M=C.loadImage(L,w,m,this);M&&y.drawImageExt(M,O.x,O.y,O.width,O.height,P,I,r,n)}}}}t.foreRender=y,t.backRender=x}t.left=s,t.top=h,t.width=c,t.height=u,t.backInvalid=!1,t.foreInvalid=!1}function v(t){var e=this.getLocalZone(),i=this._mapNode.getLocalZone(),r=this.mapTileWidth,n=this.mapTileHeight,o=r/2,a=n/2,s=e.left+this.mapX-i.left-this.mapTileRows*o,h=e.top+this.mapY-i.top,d=s+this.width,l=h+this.height,c=Math.floor(h/n-s/r),u=Math.floor(h/n+s/r),f=Math.floor(l/n-d/r),p=Math.floor(l/n+d/r),v=t.left,g=t.top,y=(u-c-1)*o+this.mapTileRows*o,x=(u+c)*a,C=t.width,T=t.height,b=(p-f-u+c+2)*o,_=(p+f-u-c+2)*a,w=this.mapTileRows,A=this.mapTileCols;if(t.backInvalid){var I=t.backRender,k=t.foreRender;I.width!==b||I.height!==_?(I.width=b,I.height=_):I.clear();for(var R=this.findApplication(),P=this.mapTileData,N=this.mapTileImageIndex,O=this.mapTileImageClipIndex,L=this.getID(),M=c,E=u-1,F=-o,B=-a;B<_&&!(E>=A);B+=a)if(M>=0){for(var G=M,X=E,Y=F,D=B;Y<b&&!(G<0||X>=A);G-=1,X+=1,Y+=r)if(!(G>=w||X<0)){var Z=P[G][X];if(Z){var $=O[Z];if($){var W=N[$.imageId];if(W){var S=R.loadImage(W,L,m,this);if(S){var V=$.width/2,H=$.height/2,U=$.x,z=$.y,K=$.width,q=$.height,j=Y,J=D,Q=r,tt=n;j<0?(U+=V,K-=V,j+=o,Q-=o):j+r>b&&(K-=V,Q-=o),J<0?(z+=H,q-=H,J+=a,tt-=a):J+n>_&&(q-=H,tt-=a),I.drawImageExt(S,U,z,K,q,j,J,Q,tt)}}}}}0===F?(F=-o,M+=1):(F=0,E+=1)}t.foreRender=I,t.backRender=k}else if(b!==C||_!==T||y!==v||x!==g){var I=t.backRender,k=t.foreRender;I.width!==b||I.height!==_?(I.width=b,I.height=_):I.clear();var et=Math.min(b+y,C+v)-Math.max(y,v),it=Math.min(_+x,T+g)-Math.max(x,g),rt=et>0&&it>0,nt=0,ot=0,at=0,st=0;rt&&(nt=y<v?v-y:0,at=et+nt,ot=x<g?g-x:0,st=it+ot,I.drawImageExt(k.getCanvas(),y>v?y-v:0,x>g?x-g:0,et,it,nt,ot,et,it),I.strokeStyle="#00f",I.strokeRect(nt,ot,et,it));for(var R=this.findApplication(),P=this.mapTileData,N=this.mapTileImageIndex,O=this.mapTileImageClipIndex,L=this.getID(),M=c,E=u-1,F=-o,B=-a;B<_&&!(E>=A);B+=a){if(M>=0)for(G=M,X=E,Y=F,D=B;Y<b&&!(G<0||X>=A);G-=1,X+=1,Y+=r)if(!(G>=w||X<0)){var Z=P[G][X];if(Z){var $=O[Z];if($){var W=N[$.imageId];if(W){var S=R.loadImage(W,L,m,this);if(S){var V=$.width/2,H=$.height/2,U=$.x,z=$.y,K=$.width,q=$.height,j=Y,J=D,Q=r,tt=n;j<0?(U+=V,j+=o,K-=V,Q-=o):j+r>b&&(K-=V,Q-=o),J<0?(z+=H,J+=a,q-=H,tt-=a):J+n>_&&(q-=H,tt-=a),rt?J+tt<=ot?I.drawImageExt(S,U,z,K,q,j,J,Q,tt):J>=st?I.drawImageExt(S,U,z,K,q,j,J,Q,tt):j+Q<=nt?I.drawImageExt(S,U,z,K,q,j,J,Q,tt):j>=at?I.drawImageExt(S,U,z,K,q,j,J,Q,tt):D+a===ot?Y+o===nt?nt>0?(ot>0&&I.drawImageExt(S,$.x,$.y,$.width,H,Y,D,r,a),I.drawImageExt(S,$.x,$.y+H,V,H,Y,D+a,o,a)):ot>0&&I.drawImageExt(S,$.x+V,$.y,V,H,Y+o,D,o,a):Y+o===at?at<b?(ot>0&&I.drawImageExt(S,$.x,$.y,$.width,H,Y,D,r,a),I.drawImageExt(S,$.x+V,$.y+H,V,H,Y+o,D+a,o,a)):ot>0&&I.drawImageExt(S,$.x,$.y,V,H,Y,D,o,a):ot>0&&I.drawImageExt(S,$.x,$.y,$.width,H,Y,D,r,a):D+a===st?Y+o===nt?nt>0?(st<_&&I.drawImageExt(S,$.x,$.y+H,$.width,H,Y,D+a,r,a),I.drawImageExt(S,$.x,$.y,V,H,Y,D,o,a)):st<_&&I.drawImageExt(S,$.x+V,$.y+H,V,H,Y+o,D+a,o,a):Y+o===at?at<b?(st<_&&I.drawImageExt(S,$.x,$.y+H,$.width,H,Y,D+a,r,a),I.drawImageExt(S,$.x+V,$.y,V,H,Y+o,D,o,a)):st<_&&I.drawImageExt(S,$.x,$.y+H,V,H,Y,D+a,o,a):st<_&&I.drawImageExt(S,$.x,$.y+H,$.width,H,Y,D+a,r,a):Y+o===nt?I.drawImageExt(S,$.x,$.y,V,$.height,Y,D,o,n):Y+o===at&&I.drawImageExt(S,$.x+V,$.y,V,$.height,Y+o,D,o,n):I.drawImageExt(S,U,z,K,q,j,J,Q,tt)}}}}}0===F?(F=-o,M+=1):(F=0,E+=1)}t.foreRender=I,t.backRender=k}t.left=y,t.top=x,t.width=b,t.height=_,t.backInvalid=!1,t.foreInvalid=!1}function m(t,e,i,r){if(r&&i){var n=this._mapCacheCtx.tile;n.foreInvalid=!0,n.backInvalid=!0,this.dirty()}}return{syncMapContext:t}}();return function(){var i=r.a.extend(n.a);return i.prototype.defWidth=0,i.prototype.defHeight=0,i.prototype.defAnchorX=.5,i.prototype.defAnchorY=.5,i.prototype.defMapTileType="square",i.prototype.defMapTileWidth=50,i.prototype.defMapTileHeight=50,i.prototype.defMapTileRows=40,i.prototype.defMapTileCols=30,i.prototype.init=function(i){this.super("init",[i]),this.defineNotifyProperty("mapX",r.a.checkAndGet(i.mapX,0)),this.defineNotifyProperty("mapY",r.a.checkAndGet(i.mapY,0)),this.defineNotifyProperty("mapTileType",r.a.checkAndGet(i.mapTileType,this.defMapTileType)),this.defineNotifyProperty("mapTileWidth",r.a.checkAndGet(i.mapTileWidth,this.defMapTileWidth)),this.defineNotifyProperty("mapTileHeight",r.a.checkAndGet(i.mapTileHeight,this.defMapTileHeight)),this.defineNotifyProperty("mapTileImageIndex",r.a.checkAndGet(i.mapTileImageIndex,{})),this.defineNotifyProperty("mapTileImageClipIndex",r.a.checkAndGet(i.mapTileImageClipIndex,{})),this.defineNotifyProperty("mapTileRows",r.a.checkAndGet(i.mapTileRows,this.defMapTileRows)),this.defineNotifyProperty("mapTileCols",r.a.checkAndGet(i.mapTileCols,this.defMapTileCols)),this.defineNotifyProperty("mapTileData",r.a.checkAndGet(i.mapTileData,[])),this._mapNode=new n.a({rotateZ:0}),this.appendChildNode(this._mapNode),this._mapCacheCtx={tile:{needRender:!1,left:0,top:0,width:0,height:0,foreInvalid:!0,foreRender:new o.a({canvas:t.createElement("canvas")}),backInvalid:!0,backRender:new o.a({canvas:t.createElement("canvas")})}},this._mapCacheCtx.tile.foreRender.globalAlpha=1,this._mapCacheCtx.tile.backRender.globalAlpha=1,t.body.appendChild(this._mapCacheCtx.tile.foreRender.getCanvas()),t.body.appendChild(this._mapCacheCtx.tile.backRender.getCanvas()),e.syncMapContext.call(this),this.addObserver("mapTileTypeChanged",e.syncMapContext,this)},i.prototype.addModel=function(t){this._mapNode.appendChildNode(t)},i.prototype.removeModel=function(t,e){this._mapNode.removeChildNode(t,e)},i}()}()},function(t,e,i){"use strict";var r=i(0),n=i(1),o=i(18),a=i(19);e.a=function(){var t=function(){function t(e){var i=new a.a(e.node);if(e.id&&(this._nodeMap[e.id]=i),e.children)for(var r=e.children,n=0,o=r.length;n<o;++n)i.appendChildNode(t.call(this,r[n]));return i}function e(e){e&&(this._nodeMap={},this._node=t.call(this,e))}function i(t){if(this._actions={},t)for(var e=0,i=t.length;e<i;++e){var r=t[e],n=r.frames;if(n){var a=[];for(var s in n){var h=this._nodeMap[s],d=n[s];if(h&&d){var l=o.a.compileModelFrames(h,d,h===this._node);l&&a.push({node:h,animation:l})}}a.length>0&&(this._actions[r.id]=a)}}}return{createNodes:e,compileActions:i}}();return function(){var e=r.a.extend(n.a);return e.prototype.init=function(e){this.super("init",[e]),this._node=null,this._nodeMap=null,this._actions=null,this._actionsContext={runningActId:null,runningAct:null,progress:0,loop:!1},t.createNodes.call(this,r.a.checkAndGet(e.root,null)),t.compileActions.call(this,r.a.checkAndGet(e.actions,null))},e.prototype.addNode=function(t,e,i,r){var n=this._nodeMap[i];if(!n)return void console.log("Can not find parent node:"+r);if(arguments.length>3){if(null===r)return n.appendChildNodeToLayer(t,0),void(this._nameMap[e]=t);var o=this._nodeMap[r];if(!o)return void console.log("Can not find prev node:"+r);var a=n.getChildNodeLocation(o);return a?(n.appendChildNodeToLayer(t,a.layerIndex,a.nodeIndex+1),void(this._nodeMap[e]=t)):void console.log("Can not find prev node:"+r+" in parent node:"+i)}return n.appendChildNode(t),void(this._nodeMap[e]=t)},e.prototype.getNode=function(t){return 0===arguments.length?this._node:this._nodeMap[t]},e.prototype.removeNode=function(t,e){var i=this._nodeMap[t];return i?(i.removeFromParent(e),delete this._nodeMap[t],i):null},e.prototype.compileAndSetAction=function(t){var e=[],i=t.frames;for(var r in i){var n=this._nodeMap[r],a=i[r];if(n&&a){var s=o.a.compileModelFrames(n,a,n===this._node);s&&e.push({node:n,animation:s})}}e.length>0?this._actions[t.id]=e:delete this._actions[t.id]},e.prototype.runAction=function(e,i){var r=this._actionsContext;name!==r.runningActId&&(this.stopAction(),r.runningActId=e,r.runningAct=this._actions[e],r.loop=i,t.runAction.call(this))},e.prototype.stopAction=function(){var t=this._actionsContext;null!=t.runningActId&&this._node.stopAnimation(!0),t.runningActId=null,t.runningAct=null,t.progress=0,t.loop=!1},e.prototype.destroy=function(){this.super("destroy")},e}()}()},function(t,e,i){"use strict";e.a=function(){return function(){function t(){return 9007199254740991}function e(){return-9007199254740991}return{getMaxInteger:t,getMinInteger:e}}()}()}]);